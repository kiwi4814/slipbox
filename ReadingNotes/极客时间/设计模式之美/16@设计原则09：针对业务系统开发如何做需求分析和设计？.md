+++
title = "设计原则09：针对业务系统开发如何做需求分析和设计？"
date = 2022-03-30 09:20:54
slug = "/business-principle-action"
draft = false
tags = ["阅读笔记","设计模式"]
categories = ["阅读笔记"]
series = ["设计模式之美"]
toc = false

+++

> 本系列为极客时间专栏《设计模式之美》的阅读笔记，结合了《架构整洁之道》、《重构：改善既有代码的设计》等书籍中相关章节的描述，非原创。

今天的主题是，针对一个业务需求，如何利用之前学到过的理论知识进行需求分析和设计？



我们在日常的开发中大部分都是围绕着CRUD，或者根据产品的需求翻译业务逻辑，很少能用到设计原则、思想和模式等。其实不然，今天我们通过一个积分兑换系统的开发实战，一方面展示一个业务需求从需求分析到上线维护的整个开发过程，另一方面给你展示在看似没有技术含量的业务开发中，实际上都蕴含了哪些设计原则、思想、模式。



## 需求分析

积分是一种常见的营销手段，很多产品都会通过积分系统来促进消费、增加用户粘性。假如需要你开发这样一个积分系统，你会如何做呢？



这里有两个思维误区，一个是“作为开发我只需要关注产品经理给的需求就行”，另外一个是“我需要独立把整个系统设计好”。首先作为一个技术人员，一定要有产品思维，然后在设计时要学会“借鉴”。具体到积分系统，当我们设计积分系统这个功能的时候，不妨先去找几个成熟的积分系统观摩一下，比如淘宝、招商银行的积分系统，或者用搜索引擎搜索一下淘宝的积分规则，大概就知道我们的系统该如何设计了。另外，除了借鉴之外，还可以通过线框图、用户用例user case（也叫用户故事user story）来细化业务流程。



通过以上的方法，我们大概能罗列出积分系统的需求：

### 1. 积分赚取和兑换原则

积分的赚取渠道包含：每日签到、消费、评论等。



兑换规则可以是，签到+10，按照消费金额百分比获取以及评论、点赞数量等。



对于积分的有效期，我们可以针对不同方式获取的积分，设置不同的有效期。积分到期会作废；在消费积分的时候，优先使用快到期的积分。



### 2. 积分消费和兑换原则

积分的消费渠道包含：兑换商品、抵扣金额、兑换优惠券、参与活动扣积分等。



兑换规则同理，比如10积分可以抵扣1块钱，而100积分可以获得一张15元的优惠券等等。

### 3. 积分及明细查询

查询用户总积分以及积分的赚取、消费的历史记录。



## 系统设计

### 1. 合理地将功能划分到不同模块

面向对象设计的本质就是把合适的代码放到合适的类中。针对上面的需求，有下面这几种模块划分方式：

- 抽象出一个营销系统，负责积分规则的维护，这样积分系统就只需要负责积分的CRUD
- 积分的规则分散在各个业务系统中，比如订单系统、评论系统、签到系统、优惠券系统等。
- 所有的功能都抽象为积分系统。

怎么样区分哪种模块划分更合理呢？实际上，我们可以看它是否满足高内聚、低耦合的特性来判断。





### 2. 设计模块与模块之间的交互关系

### 3. 设计模块的接口、数据库、业务模型
