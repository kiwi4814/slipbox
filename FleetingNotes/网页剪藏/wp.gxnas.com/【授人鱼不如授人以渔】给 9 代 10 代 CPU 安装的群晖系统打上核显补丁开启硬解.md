> 本文由 [简悦 SimpRead](http://ksria.com/simpread/) 转码， 原文地址 [wp.gxnas.com](https://wp.gxnas.com/12665.html)

> 两年半以前，写过一篇《关于 9 代 10 代 11 代 12 代 cpu 安装 DS918 核显不显、不能硬解的说明》，同时还做了若干个型号的核显补丁。

       两年半以前，写过一篇《[关于 9 代 10 代 11 代 12 代 cpu 安装 DS918 核显不显、不能硬解的说明](https://wp.gxnas.com/7952.html)》，同时还做了若干个型号的核显补丁。后来不更新核显补丁以后，不断有网友咨询，所以干脆公布一下制作教程吧。

1、打开群晖 File Station，找一个英文或者数字的文件夹，点菜单上，新增，新建文件夹；

![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318568-1.jpg)

2、起一个非中文的名字，我这写的是 i195（本来想写 i915 的，手抖了，将错就错吧）；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318570-2.jpg)

3、在文件夹点右键，属性；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318573-3.jpg)

4、位置显示的路径，记下来，等下要用到；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318577-4.jpg)

5、打开群晖控制面板，任务计划，新增，触发的任务，用户定义的脚本；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318584-5.jpg)

6、任务名称写一个非中文的名字，用户账号要改为 root，把 “已启动” 的打勾去掉；

![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318585-6.jpg)

7、任务设置，用户定义的脚本，复制以下内容，替换成自己 NAS 实际路径（把 /volume1/homes/wjq_xp/i195 替换成在第 4 步骤获取实际路径），确定，这一步的目的是为了把当前系统使用的核显文件 i915.ko 复制出来：

```
cp /usr/lib/modules/i915.ko /volume1/homes/wjq_xp/i195
```

![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318585-7.jpg)

8、在建立好的任务右键，运行；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318586-8.jpg)

9、是；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318586-9.jpg)

10、回到 Files  Station，进入建立好的 i195 文件夹，刷新一下就看到已经有文件了，在文件上点右键，下载；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318586-10.jpg)

11、在电脑上找一个地方保存，我选择保存在 Win 系统的桌面；[![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318587-11.jpg)](https://wp.gxnas.com/wp-content/uploads/2022/11/1667318587-11.jpg)

12、在 Win 电脑上下载【[WinHeX](https://dl.gxnas.com:1443/%E9%BB%91%E7%BE%A4%E6%99%96/%E5%B7%A5%E5%85%B7/WinHex.rar)】软件，解压出来并运行软件，点打开文件图标，找到保存在电脑桌面的 i915.ko 文件，打开；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318587-12.jpg)

13、点 WinHex 软件上的查找十六进制数值图标；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318587-13.jpg)

14、白群 DS918 + 的核显型号为 HD610，对应的核显 ID 为 3E92，3E 和 92 的位置要调换一下，我们要搜索 8 个字节的数值，所以在这里输入 923E0000，确定；[![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318588-14.jpg)](https://wp.gxnas.com/wp-content/uploads/2022/11/1667318588-14.jpg)

15、正常情况下，会显示出来搜索有一个，点到这个搜索的结果；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318589-15.jpg)

16、光标会自动跳转到 “923E0000” 的第一个数值 “9” 处；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318589-16.jpg)

17、在电脑浏览器，打开【[intel 产品规格搜索](https://ark.intel.com/content/www/cn/zh/ark/search.html?_charset_=UTF-8)】，在 “产品名或者关键字” 处输入你的 CPU 型号；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318590-17.jpg)

18、需要说明一下，只有 intel 9 代的 i9 系列 CPU 以及 10 代全系列的 CPU，安装群晖 DS918 + 和 DS920 + 这两个系统需要打核显补丁；本教程以 10 代的 10300 这个 CPU 为例，所以在上面输入 10300 回车；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318590-18.jpg)

19、从搜索结果中找到我们要查看的 i3-10300 这个型号，点链接进去；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318591-20.jpg)

20、找到处理器显卡这里的设备 ID，后面 4 个数值为 9BC8，记录下来，等下要用到；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318591-21.jpg)

21、切换到 WinHex 软件这边，把 “923E” 改为“C89B”（在下图光标处，直接用键盘输入，字母需要用大写）；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318593-22.jpg)

22、点菜单上的查找十六进制数值图标；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318594-23.jpg)

23、输入 308201F7，确定，此处是核显文件签名内容；[![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318615-24.jpg)](https://wp.gxnas.com/wp-content/uploads/2022/11/1667318615-24.jpg)

24、正常情况下，也会显示出来搜索有一个，点到这个 308201F7 的上面；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318617-25.jpg)

25、同样，光标也会自动跳到 308201F7 的 “3” 处；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318619-26.jpg)

26、从 308201F7 的 “3‘开始，按住鼠标左键不放手，一直拖到最后一个数值，然后松开鼠标左键，此时已经选中这些内容（如下图）；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318619-27.jpg)

27、点菜单上的编辑，移除；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318620-28.jpg)

28、是；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318620-29.jpg)

29、好了，已经把签名去掉了；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318621-30.jpg)

30、点菜单上保存；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318622-31.jpg)

31、是；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318623-32.jpg)

32、回到群晖 File  Station，把原来的文件改名；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318623-33.jpg)

33、在文件名后面加个. bak，确定，备份一下；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318624-34.jpg)

34、备份好了；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318624-35.jpg)

35、点菜单，上传，上传 - 覆盖；[![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318624-36.jpg)](https://wp.gxnas.com/wp-content/uploads/2022/11/1667318624-36.jpg)

36、把电脑桌面刚才修改好核显 ID 的 i915.ko，上传到群晖文件夹；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318625-37.jpg)

37、群晖打开控制面板，任务计划，找到第 5 步骤建立的任务，右键，编辑；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318625-38.jpg)

38、复制以下命令，把 /volume1/homes/wjq_xp/i195/i915.ko 替换成在第 4 步骤获取实际路径：

```
mv /usr/lib/modules/i915.ko /usr/lib/modules/i915.ko.bak
cp /volume1/homes/wjq_xp/i195/i915.ko /usr/lib/modules/
chmod 644 /usr/lib/modules/i915.ko
```

![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318626-39.jpg)

39、确定；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318626-40.jpg)

40、找到刚刚修改的任务，右键，运行；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318627-41.jpg)

41、是；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318628-42.jpg)

42、找到刚刚修改的任务，右键，删除；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318629-43.jpg)

43、删除；![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1667318630-45.jpg)

44、重启群晖生效。

45、群晖开启 SSH，用 root 登录到 SSH 状态下，输入命令测试能否硬解：

```
ls /dev/dri
cat /sys/kernel/debug/dri/0/i915_frequency_info
```

46、看一下 HW control enabled 的后面是写 yes 还是 no，yes 表示可以硬解。

![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1643624308-1.jpg)

47、如果 HW control enabled 的后面，显示的是 no，则表示不可以硬解。![](https://kiwi4814-1256211473.cos.ap-nanjing.myqcloud.com//img1643624311-2.jpg)

**特别说明：**

**# intel 从 4 代到 9 代，除了 9 代 i9 以外，其他型号均不需要打核显补丁，使用 DS918 + 和 DS920 + 的引导默认就支持核显硬解；**

**# intel 11 代及 11 代以上也不需要打核显补丁，因为群晖系统内核版本太低，DS918 + 和 DS920 + 暂时不支持核显硬解，11 代的 CPU 想折腾硬解可以去看《[关于黑群晖使用 11 代 CPU 开启核显硬解那些事](https://wp.gxnas.com/13017.html)》；**

**# 本教程操作涉及 DSM 系统层文件的修改，如操作不当有可能会造成系统失联，请想清楚再下手！**

**# 由于每个人使用的硬件都不一样，本教程不保证 100% 能成功，请想清楚再下手！**

**# 据网友反馈，如果使用 10 代的 CPU 并且使用微星、技嘉、七彩虹这三个品牌的主板，只要打上核显补丁大概率会翻车，请想清楚再下手！**

**# 如果打完核显补丁后不幸翻车：**

*   **虚拟机安装群晖的，可以先关闭群晖虚拟机，把直通核显去掉，虚拟机重新开机，可以进入系统；**
*   **物理机安装群晖的，只能重装系统了。**